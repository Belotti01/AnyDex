@using Microsoft.AspNetCore.Identity
@inherits LayoutComponentBase

@inject SignInManager<User> SignInManager


<Layout>
    <Header Class="header">
        <div class="logo" />
        <Menu Theme="MenuTheme.Dark" Mode="MenuMode.Horizontal" DefaultSelectedKeys=@(new []{"1"})>
            <MenuItem Key="1" RouterLink="/">Index</MenuItem>
            <MenuItem Key="2" RouterLink="/counter">Counter</MenuItem>
            <SubMenu Key="3" Title="Account" Placement="Placement.BottomCenter" >
                <AuthorizeView> 
                    <Authorized>
                        <MenuItem Key="4" OnClick="Logout" Title="Logout"></MenuItem>
                    </Authorized>
                    <NotAuthorized>
                        <MenuItem Key="4" RouterLink="/Identity/Account/Register" Title="Register"></MenuItem>
                        <MenuItem Key="5" RouterLink="/Identity/Account/Login" Title="Login"></MenuItem>
                    </NotAuthorized>
                </AuthorizeView>
            </SubMenu>
        </Menu>
    </Header>
    
    <Layout Style=" padding: 0 24px 24px;">
        <Content Class="site-layout-background" Style="padding: 24px; margin: 0; min-height: 100vh;">
            @Body
        </Content>
        <Footer Style="text-align: center;">AnyDex ©2022</Footer>
    </Layout>

</Layout>

<style>
    .logo {
        width: 120px;
        height: 31px;
        background: rgba(255, 255, 255, 0.2);
        margin: 16px 28px 16px 0;
        float: left;
    }

    .site-layout-background {
        background: #fff;
    }
</style>


@code {
    bool collapsed;

    public void onCollapse(bool collapsed) {
        Console.WriteLine(collapsed);
        this.collapsed =collapsed;
    }

    public async Task Logout() {
        // Implement logout
    }
}