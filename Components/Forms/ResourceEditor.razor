@inherits BaseDbComponent<ResourceEditor>

<AuthorizeView>
	<Authorized>
		<MudCard>
			@if(Resource is null) {
				<MudProgressLinear Indeterminate Class="w-100"/>
			}else {
				<MudCardContent>
					<MudForm Model="Resource">
						<MudContainer MaxWidth="MaxWidth.Medium">
						</MudContainer>
					</MudForm>
				</MudCardContent>
			}
		</MudCard>
	</Authorized>

	<NotAuthorized>
		<UnauthorizedView />
	</NotAuthorized>

</AuthorizeView>



@code {
	[Parameter]
	public ulong ResourceId { get; set; } = 0;
	protected Resource? Resource { get; set; }

	protected override async Task OnInitializedAsync() {
		await base.OnInitializedAsync();
		// If a resource ID was specified, look for the tied resource
		if(ResourceId != 0) {
			Resource = DbContext.Resources.FirstOrDefault(x => x.Id == ResourceId);
		}

		if(Resource is null) {
			// The resource was not found or no ID was specified
			if(ResourceId != 0) {
				// The specified resource does not exist
				Snackbar.AddError("Resource does not exist. A new one will be created.");
			}
			Resource = new();
			await DbContext.AddAsync(Resource);
		}
	}
}
